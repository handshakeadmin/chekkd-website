!function(t){"use strict";function e(t){this.$el=t,this.sectionEls=[...this.$el[0].querySelectorAll(".nectar-sticky-media-section__content-section")],this.timeline=null,this.scrollStartPoint=0,this.scrollEndPoint=0,this.elementHeight=0,this.activeIndex=0,this.isSticky=!1,this.subtractNavHeight=this.$el[0].classList.contains("subtract-nav-height"),this.effect=this.extractEffectFromClass(),this.midSplitProgress=.5,this.stackExposePx=20,this.usingMobileBrowser=!!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/),this.init()}function i(t){this.$el=t,this.sections=[],this.subtractNavHeight=this.$el[0].classList.contains("subtract-nav-height"),this.sectionEls=[...this.$el[0].querySelectorAll(".nectar-sticky-media-section__content-section")],this.$stickyEl=this.$el[0].querySelector(".nectar-sticky-media-section__content__wrap"),this.usingFrontEndEditor=!(!window.nectarDOMInfo||!window.nectarDOMInfo.usingFrontEndEditor),this.gap="20px",this.activeIndex=0,this.effect=this.extractEffectFromClass(),this.isFullWidthContent=this.hasParentWithClass(this.$el[0],"full-width-content"),this.timeline=null,this.scrollStartPoint=0,this.scrollEndPoint=0,this.elementHeight=0,this.maxTranslation=0,this.isSticky=!1,this.wasSticky=!1,this.isMobileMode=Boolean(window.nectarDOMInfo&&window.nectarDOMInfo.winW<1e3),this.usingMobileBrowser=!!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/),this.init()}function n(t){this.$el=t,this.sections=[],this.sectionEls=[...this.$el[0].querySelectorAll(".nectar-sticky-media-section__content-section")],this.usingFrontEndEditor=!(!window.nectarDOMInfo||!window.nectarDOMInfo.usingFrontEndEditor),this.gap="20px",this.activeIndex=0,this.stackingEffect=!1,this.subtractNavHeight=this.$el[0].classList.contains("subtract-nav-height"),this.usingNavigation=!1,this.navigationButtons=[],this.effect="default",this.usingMobileBrowser=!!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/),this.init()}function s(t){this.$el=t,this.$mediaSections=this.$el.find(".nectar-sticky-media-section__featured-media"),this.$contentSections=this.$el.find(".nectar-sticky-media-section__content"),this.usingFrontEndEditor=!(!window.nectarDOMInfo||!window.nectarDOMInfo.usingFrontEndEditor),this.direction="down",this.prevScroll=0,this.activeIndex=0,this.prevIndex=-1,this.timeout="",this.events()}e.prototype.init=function(){this.$el[0].style.setProperty("--section-count",this.sectionEls.length),this.initStackingCards()},e.prototype.initStackingCards=function(){this.calculateScrollPoints(),this.createTimeline(),this.setInitialRotations(),this.events(),this.raf(),setTimeout(()=>this.setInitialTimelinePosition(),100),t(window).on("load",()=>this.setInitialTimelinePosition())},e.prototype.extractEffectFromClass=function(){const t=this.$el[0].classList;for(let e of t)if(e.startsWith("layered-card-reveal-effect--")){switch(e.replace("layered-card-reveal-effect--","")){case"stack":return"stack";case"staggered-wave":return"staggered-wave";default:return"stack"}}return"stack"},e.prototype.calculateScrollPoints=function(){window.nectarDOMInfo&&window.nectarDOMInfo.scrollTop?window.nectarDOMInfo.scrollTop:window.scrollY;if(0===this.$el[0].getBoundingClientRect().height)return void requestAnimationFrame(this.calculateScrollPoints.bind(this));if(this.elementHeight=this.$el[0].offsetHeight,this.elementHeight<=0)return void requestAnimationFrame(this.calculateScrollPoints.bind(this));let t=0;if(this.subtractNavHeight){const e=getComputedStyle(document.documentElement).getPropertyValue("--header-nav-height");if(e){t+=c(e,this.$el[0])}}const e=getComputedStyle(document.documentElement).getPropertyValue("--wp-admin--admin-bar--height");if(e){t+=parseInt(e)||0}let i=0,n=this.$el[0];for(;n&&n!==document.body;)i+=n.offsetTop,n=n.offsetParent;this.scrollStartPoint=i-t;const s=this.elementHeight-this.elementHeight/this.sectionEls.length;if(this.scrollEndPoint=this.scrollStartPoint+s,"staggered-wave"===this.effect){const t=1*(window.nectarDOMInfo&&window.nectarDOMInfo.winH?window.nectarDOMInfo.winH:window.innerHeight);this.scrollStartPoint-=t,this.scrollEndPoint+=2*t}},e.prototype.createTimeline=function(){if(this.elementHeight<=0)return void console.warn("Cannot create timeline - invalid element height");this.startRotations=[],this.midRotations=[],this.endRotations=[];for(let t=0;t<this.sectionEls.length;t++){const e=Math.random()<.5?-1:1,i=15+15*Math.random();this.startRotations[t]=e*i;const n=Math.min(4,Math.max(2,.15*i));this.midRotations[t]=e*n;const s=15+15*Math.random();this.endRotations[t]=e*s}this.timeline=anime.timeline({autoplay:!1,easing:"linear"});const t=this.sectionEls.length,e=this.elementHeight/t;switch(this.effect){case"stack":const t=this.sectionEls.length,i=(this.stackExposePx,window.nectarDOMInfo&&window.nectarDOMInfo.winH?window.nectarDOMInfo.winH:window.innerHeight),n=Math.max(1,t-1),s=this.elementHeight/n;if(!this.stackExitRot||this.stackExitRot.length!==t){this.stackExitRot=new Array(t);for(let e=0;e<t;e++)this.stackExitRot[e]=(Math.random()<.5?-1:1)*(12+10*Math.random())}this.stackOff=new Array(t);for(let e=0;e<t;e++){const t=this.sectionEls[e].offsetHeight||0,n=window.nectarDOMInfo&&window.nectarDOMInfo.winW<1e3||this.usingMobileBrowser?100:40;this.stackOff[e]=Math.max(200,Math.ceil(i/2+t/2+n))}for(let e=t-1;e>=0;e--){if(0===e)continue;const i=(t-1-e)*s,n=s,o=this.stackOff[e],a=this.stackExitRot[e];this.timeline.add({targets:this.sectionEls[e],duration:n,easing:"linear",update:t=>{const i=t.progress/100,n=(anime&&anime.easings&&anime.easings.easeInOutSine?anime.easings.easeInOutSine:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2})(i),s=-o*n,r=a*n;this.sectionEls[e].style.setProperty("--stack-offset",`${s}px`),this.sectionEls[e].style.setProperty("--stack-scale","1"),this.sectionEls[e].style.setProperty("--stack-rot",`${r}deg`)}},i)}break;case"staggered-wave":this.midSplitProgress=.42;const o=this.elementHeight,a=o*this.midSplitProgress,r=o,c=(this.sectionEls.length-1)/2,l=25,h=.1,d=a*.8/this.sectionEls.length,f=window.nectarDOMInfo&&window.nectarDOMInfo.winH?window.nectarDOMInfo.winH:window.innerHeight,m=[],u=[],p=[],g=[],w=[];for(let t=0;t<this.sectionEls.length;t++){m[t]=(c-t)*l;const e=this.sectionEls[t].offsetHeight||0;u[t]=Math.max(200,Math.ceil(f/2+e/2+40)),p[t]=t*d;const i=.18*a,n=.45*a,s=a-p[t];g[t]=Math.max(60,Math.min(n,Math.max(i,s))),w[t]=p[t]+g[t]}const y=Math.max.apply(null,w),v=(r-y)*h/this.sectionEls.length;for(let t=0;t<this.sectionEls.length;t++){this.timeline.add({targets:this.sectionEls[t],translateY:[u[t],0],rotateZ:[this.startRotations[t],this.midRotations[t]],translateX:[m[t],m[t]],duration:g[t],easing:"easeOutSine"},p[t]);const e=y+t*v,i=Math.max(60,Math.min(g[t],r-e));this.timeline.add({targets:this.sectionEls[t],translateY:[0,-u[t]],rotateZ:[this.midRotations[t],this.endRotations[t]],translateX:[m[t],m[t]],duration:i,easing:"easeInOutSine"},e)}break;default:for(let t=this.sectionEls.length-1;t>=0;t--){const i=(this.sectionEls.length-1-t)*e;this.timeline.add({targets:this.sectionEls[t],top:["50%","-50%"],transform:[`translateX(-50%) translateY(-50%) rotateZ(${this.startRotations[t]}deg)`,`translateX(-50%) translateY(-50%) rotateZ(${this.endRotations[t]}deg)`],duration:e,easing:"linear"},i)}}},e.prototype.setInitialRotations=function(){switch(this.effect){case"stack":case"staggered-wave":for(let t=0;t<this.sectionEls.length;t++)if("staggered-wave"===this.effect){const e=((this.sectionEls.length-1)/2-t)*18,i=window.nectarDOMInfo&&window.nectarDOMInfo.winH?window.nectarDOMInfo.winH:window.innerHeight,n=this.sectionEls[t].offsetHeight||0,s=Math.max(200,Math.ceil(i/2+n/2+40));this.sectionEls[t].style.top="auto",this.sectionEls[t].style.transform=`translateX(${e}px) translateY(${s}px)`}else{this.sectionEls[t].style.top="50%";const e=this.sectionEls.length-1-t,i=.04,n=e*15,s=Math.max(.75,1-e*i);this.sectionEls[t].style.setProperty("--stack-offset",`${n}px`),this.sectionEls[t].style.setProperty("--stack-scale",`${s}`),this.sectionEls[t].style.setProperty("--stack-rot","0deg")}break;default:for(let t=0;t<this.sectionEls.length;t++){const e=this.startRotations[t];this.sectionEls[t].style.top="50%",this.sectionEls[t].style.setProperty("--layered-offset-x","0px"),this.sectionEls[t].style.setProperty("--layered-rot",e+"deg")}}},e.prototype.getActiveIndexForProgress=function(t){if("staggered-wave"===this.effect){if(t<=0)return-1;if(t>=1)return-1;if(t<=this.midSplitProgress){const e=Math.floor(t/this.midSplitProgress*this.sectionEls.length);return Math.min(this.sectionEls.length-1,e-1)}{const e=Math.floor((t-this.midSplitProgress)/(1-this.midSplitProgress)*this.sectionEls.length);return Math.max(-1,this.sectionEls.length-1-e)}}const e=Math.floor(t*this.sectionEls.length);return this.sectionEls.length-1-e},e.prototype.setInitialTimelinePosition=function(){if(!this.timeline||window.nectarState&&window.nectarState.materialOffCanvasOpen)return;const t=window.nectarDOMInfo&&window.nectarDOMInfo.scrollTop?window.nectarDOMInfo.scrollTop:window.scrollY;if(t>this.scrollEndPoint){if(this.timeline.seek(this.timeline.duration),this.isSticky=!1,this.updateSectionStates(-1),"stack"===this.effect&&this.sectionEls.length>0){const t=0;this.sectionEls[t].style.setProperty("--stack-offset","0px"),this.sectionEls[t].style.setProperty("--stack-scale","1"),this.sectionEls[t].style.setProperty("--stack-rot","0deg")}}else if(t>=this.scrollStartPoint&&t<=this.scrollEndPoint){const e=(t-this.scrollStartPoint)/(this.scrollEndPoint-this.scrollStartPoint),i=Math.max(0,Math.min(1,e));this.timeline.seek(i*this.timeline.duration),this.isSticky=!0,this.updateSectionStates(this.getActiveIndexForProgress(i))}else this.timeline.seek(0),this.isSticky=!1,this.updateSectionStates(this.sectionEls.length-1)},e.prototype.recomputeLayout=function(){this.calculateScrollPoints(),this.createTimeline(),this.setInitialTimelinePosition()},e.prototype.updateSectionStates=function(t){this.activeIndex=t,this.sectionEls.forEach(t=>{t.classList.remove("active","stacked")});for(let t=0;t<this.sectionEls.length;t++)this.sectionEls[t].classList.add("stacked");t>=0&&t<this.sectionEls.length&&(this.sectionEls[t].classList.add("active"),this.sectionEls[t].classList.remove("stacked"))},e.prototype.events=function(){this.usingMobileBrowser?window.addEventListener("orientationchange",()=>{this.recomputeLayout()},{passive:!0}):t(window).on("resize",()=>{this.recomputeLayout()}),"IntersectionObserver"in window&&!this.preEntryObserver&&(this.preEntryObserver=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&this.recomputeLayout()})},{root:null,rootMargin:"200px 0px 200px 0px",threshold:0}),this.preEntryObserver.observe(this.$el[0]))},e.prototype.raf=function(){if(!this.timeline||window.nectarState&&window.nectarState.materialOffCanvasOpen)return void requestAnimationFrame(this.raf.bind(this));const t=window.nectarDOMInfo&&window.nectarDOMInfo.scrollTop?window.nectarDOMInfo.scrollTop:window.scrollY;if(t>=this.scrollStartPoint&&t<=this.scrollEndPoint){this.isSticky||(this.isSticky=!0,window.nectarPreventParallax=!0);const e=(t-this.scrollStartPoint)/(this.scrollEndPoint-this.scrollStartPoint),i=Math.max(0,Math.min(1,e));if(this.timeline.seek(i*this.timeline.duration),"stack"===this.effect){const t=this.sectionEls.length,e=Math.max(1,t-1),n=1/e,s=Math.min(e-1,Math.floor(i/n)),o=s*n,a=Math.max(0,Math.min(1,(i-o)/n)),r=t-1-s,c=s+(anime&&anime.easings&&anime.easings.easeInOutSine?anime.easings.easeInOutSine:function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2})(a),l=.04,h=this.stackExposePx;for(let e=0;e<t;e++){if(e>=r)continue;const i=Math.max(0,t-1-e-c),n=Math.max(.75,1-i*l);this.sectionEls[e].style.setProperty("--stack-scale",`${n}`);const s=i*h;this.sectionEls[e].style.setProperty("--stack-offset",`${s}px`)}}this.updateSectionStates(this.getActiveIndexForProgress(i))}else if(this.isSticky)if(this.isSticky=!1,window.nectarPreventParallax=!1,t>this.scrollEndPoint){if(this.timeline.seek(this.timeline.duration),this.updateSectionStates(-1),"stack"===this.effect&&this.stackExitRot&&this.stackOff){const e=this.sectionEls.length;for(let i=0;i<e;i++){const n=Math.max(1,e-1),s=this.elementHeight/n,o=e-1-i,a=this.scrollStartPoint+(o+1)*s;if(0!==i&&t>a){const t=-this.stackOff[i],e=this.stackExitRot[i];this.sectionEls[i].style.setProperty("--stack-offset",`${t}px`),this.sectionEls[i].style.setProperty("--stack-rot",`${e}deg`)}}e>0&&(this.sectionEls[0].style.setProperty("--stack-offset","0px"),this.sectionEls[0].style.setProperty("--stack-scale","1"),this.sectionEls[0].style.setProperty("--stack-rot","0deg"))}}else if(this.timeline.seek(0),this.updateSectionStates(this.sectionEls.length-1),"stack"===this.effect){const t=this.sectionEls.length,e=this.stackExposePx,i=.04;for(let n=0;n<t;n++){const s=t-1-n,o=s*e,a=Math.max(.75,1-s*i);this.sectionEls[n].style.setProperty("--stack-offset",`${o}px`),this.sectionEls[n].style.setProperty("--stack-scale",`${a}`)}}requestAnimationFrame(this.raf.bind(this))},i.prototype.hasParentWithClass=function(t,e){if(t.classList&&t.classList.contains(e))return!0;let i=t.parentElement;for(;i;){if(i.classList&&i.classList.contains(e))return!0;i=i.parentElement}return!1},i.prototype.clearTransforms=function(){if(this.$stickyEl&&this.$stickyEl.style&&(this.$stickyEl.style.transform="",this.$stickyEl.style.removeProperty("transform")),this.sectionEls&&this.sectionEls.length)for(let t=0;t<this.sectionEls.length;t++)this.sectionEls[t]&&this.sectionEls[t].style&&(this.sectionEls[t].style.transform="",this.sectionEls[t].style.removeProperty("transform"))},i.prototype.getParentPadding=function(t){let e=0,i=t.parentElement;for(;i;){if(i.classList&&i.classList.contains("wpb_row")){const t=i.className.split(" ");for(let n of t){if(n.startsWith("right_padding_")){const t=n.replace("right_padding_",""),s=this.parseCSSValue(t,i);s>0&&(e+=s)}if(n.startsWith("left_padding_")){const t=n.replace("left_padding_",""),s=this.parseCSSValue(t,i);s>0&&(e+=s)}}}i=i.parentElement}return e},i.prototype.extractEffectFromClass=function(){const t=this.$el[0].classList;for(let e of t)if(e.startsWith("horizontal-scrolling-effect--")){switch(e.replace("horizontal-scrolling-effect--","")){case"stacking":return"stacking";case"default":default:return"default"}}return"default"},i.prototype.parseCSSValue=function(t,e){if(t.includes("px"))return parseFloat(t.replace("px",""))||0;if(t.includes("em")){return(parseFloat(t.replace("em",""))||0)*(parseFloat(window.getComputedStyle(e).fontSize)||16)}if(t.includes("rem")){return(parseFloat(t.replace("rem",""))||0)*(parseFloat(window.getComputedStyle(document.documentElement).fontSize)||16)}if(t.includes("%")){return(parseFloat(t.replace("%",""))||0)/100*(e.parentElement?e.parentElement.offsetWidth:window.innerWidth)}if(t.includes("vw")){return(parseFloat(t.replace("vw",""))||0)/100*window.innerWidth}if(t.includes("vh")){return(parseFloat(t.replace("vh",""))||0)/100*window.innerHeight}return parseFloat(t)||0},i.prototype.init=function(){this.$el[0].style.setProperty("--section-count",this.sectionEls.length),this.calculateGap(),this.calculateScrollPoints(),this.createTimeline(),this.events(),this.raf(),setTimeout(()=>this.setInitialTimelinePosition(),100),t(window).on("load",()=>this.setInitialTimelinePosition())},i.prototype.calculateGap=function(){const t=/section-gap-desktop-([^-]+)/;this.$el[0].classList.forEach(e=>{const i=e.match(t);i&&(this.gap=i[1])})},i.prototype.calculateScrollPoints=function(){const t=window.nectarDOMInfo&&window.nectarDOMInfo.scrollTop?window.nectarDOMInfo.scrollTop:window.scrollY,e=this.$el[0].getBoundingClientRect();if(0===e.top&&0===e.height)return void requestAnimationFrame(this.calculateScrollPoints.bind(this));const i=e.top+t;if(this.elementHeight=this.$el[0].offsetHeight,this.elementHeight<=0)return void requestAnimationFrame(this.calculateScrollPoints.bind(this));const n=this.$stickyEl.offsetHeight;let s=((window.nectarDOMInfo&&window.nectarDOMInfo.winH?window.nectarDOMInfo.winH:window.innerHeight)-n)/2;if(this.subtractNavHeight){const t=getComputedStyle(document.documentElement).getPropertyValue("--header-nav-height");if(t){s+=c(t,this.$el[0])/2}}const o=getComputedStyle(document.documentElement).getPropertyValue("--wp-admin--admin-bar--height");if(o){s+=(parseInt(o)||0)/2}this.scrollStartPoint=i-s;let a=this.$stickyEl.scrollWidth,r=window.innerWidth;a+=this.getParentPadding(this.$el[0]),this.isFullWidthContent||(r=this.$el[0].offsetWidth);const l=this.elementHeight-this.sectionEls[0].offsetHeight;this.scrollEndPoint=this.scrollStartPoint+l,this.maxTranslation=Math.max(0,a-r)},i.prototype.createTimeline=function(){if(this.maxTranslation<=0||this.elementHeight<=0)console.warn("Cannot create timeline - invalid values:",{maxTranslation:this.maxTranslation,elementHeight:this.elementHeight});else if(this.timeline=anime.timeline({autoplay:!1,easing:"easeInOutSine"}),"stacking"===this.effect){const t=this.sectionEls.length-1;if(t>0&&this.sectionEls.length>1){let e=0,i=!1;for(let t=1;t<this.sectionEls.length;t++){const n=this.sectionEls[t].offsetWidth;if(n<=0){i=!0;break}e+=n}if(i)return console.warn("Some sections have invalid dimensions, falling back to default behavior"),void this.timeline.add({targets:this.$stickyEl,translateX:[0,-this.maxTranslation],duration:this.elementHeight,easing:"easeInOutSine"});if(this.sectionEls[0].offsetWidth<=0)return console.warn("First section has invalid width, falling back to default behavior"),void this.timeline.add({targets:this.$stickyEl,translateX:[0,-this.maxTranslation],duration:this.elementHeight,easing:"easeInOutSine"});let n=0;for(let t=1;t<this.sectionEls.length;t++)n+=this.sectionEls[t].offsetWidth;const s=this.maxTranslation,o=s/t,a=s;for(let t=1;t<this.sectionEls.length;t++){const e=-o*t,i=o*t/a*this.elementHeight;this.timeline.add({targets:this.sectionEls[t],translateX:[0,e],duration:i,easing:"linear"},0)}}else console.warn("Stacking effect cannot be applied - insufficient sections or invalid configuration"),this.timeline.add({targets:this.$stickyEl,translateX:[0,-this.maxTranslation],duration:this.elementHeight,easing:"easeInOutSine"})}else this.timeline.add({targets:this.$stickyEl,translateX:[0,-this.maxTranslation],duration:this.elementHeight,easing:"easeInOutSine"})},i.prototype.setInitialTimelinePosition=function(){if(!(window.nectarDOMInfo&&window.nectarDOMInfo.winW>999))return;if(!this.timeline)return;const t=window.nectarDOMInfo&&window.nectarDOMInfo.scrollTop?window.nectarDOMInfo.scrollTop:window.scrollY;if(t>this.scrollEndPoint)this.timeline.seek(this.timeline.duration),this.isSticky=!1,this.wasSticky=!0,window.nectarPreventParallax;else if(t>=this.scrollStartPoint&&t<=this.scrollEndPoint){const e=this.scrollEndPoint-this.scrollStartPoint,i=(t-this.scrollStartPoint)/e,n=Math.max(0,Math.min(1,i));this.timeline.seek(n*this.timeline.duration),this.isSticky=!0,this.wasSticky=!1}else this.timeline.seek(0),this.isSticky=!1,this.wasSticky=!1,window.nectarPreventParallax},i.prototype.recomputeLayout=function(){this.calculateScrollPoints(),this.createTimeline(),this.setInitialTimelinePosition()},i.prototype.raf=function(){if(!(window.nectarDOMInfo&&window.nectarDOMInfo.winW>999)||window.nectarState&&window.nectarState.materialOffCanvasOpen)return void requestAnimationFrame(this.raf.bind(this));const e=window.nectarDOMInfo&&window.nectarDOMInfo.scrollTop?window.nectarDOMInfo.scrollTop:window.scrollY;if(!this.timeline)return void requestAnimationFrame(this.raf.bind(this));const i=e>=this.scrollStartPoint&&e<=this.scrollEndPoint;i&&!this.wasSticky&&(this.isSticky=!0);let n=0;if(this.isSticky&&i){const t=this.scrollEndPoint-this.scrollStartPoint;n=(e-this.scrollStartPoint)/t;const i=Math.max(0,Math.min(1,n));this.timeline.seek(i*this.timeline.duration),window.nectarPreventParallax=!0}else this.isSticky&&e>this.scrollEndPoint?(this.timeline.seek(this.timeline.duration),this.isSticky=!1,n=1.1,window.nectarPreventParallax=!1):e<this.scrollStartPoint&&(this.timeline.seek(0),this.isSticky=!1,n=-.1,window.nectarPreventParallax=!1,t(window).trigger("salient-parallax-minimal-refresh"));this.wasSticky=this.isSticky,requestAnimationFrame(this.raf.bind(this))},i.prototype.events=function(){const e=()=>{const t=Boolean(window.nectarDOMInfo&&window.nectarDOMInfo.winW<1e3);if(t&&!this.isMobileMode){if(this.timeline&&"function"==typeof this.timeline.pause)try{this.timeline.pause()}catch(t){}this.timeline=null,this.isSticky=!1,this.wasSticky=!1,this.clearTransforms()}!t&&this.isMobileMode&&this.recomputeLayout(),t||this.recomputeLayout(),this.isMobileMode=t};this.usingMobileBrowser?window.addEventListener("orientationchange",e,{passive:!0}):t(window).on("resize",e),t(window).on("load",()=>{if(Boolean(window.nectarDOMInfo&&window.nectarDOMInfo.winW<1e3))return this.clearTransforms(),void(this.isMobileMode=!0);this.recomputeLayout()}),"IntersectionObserver"in window&&!this.preEntryObserver&&(this.preEntryObserver=new IntersectionObserver(e=>{e.forEach(e=>{const i=Boolean(window.nectarDOMInfo&&window.nectarDOMInfo.winW<1e3);e.isIntersecting&&!i&&(t(window).trigger("salient-parallax-minimal-refresh"),this.recomputeLayout())})},{root:null,rootMargin:"200px 0px 200px 0px",threshold:0}),this.preEntryObserver.observe(this.$el[0]))},n.prototype.init=function(){this.effectConfig(),this.navigation(),this.calculateGap(),this.createTimelines(),this.calculateOffsets(),this.events(),this.raf(),this.navHighlight()},n.prototype.effectConfig=function(){for(var t=0;t<this.$el[0].classList.length;t++){var e=this.$el[0].classList[t].match(/^effect-(.*)$/);if(e){var i=e[1];this.effect=i}}this.stackingEffect=this.$el[0].classList.contains("stacking-effect")||"overlapping"===this.effect,this.effects={default:{},scale:{scale:[1,.92],translateY:this.stackingEffect?[0,-54]:[0,0]},scale_blur:{scale:[1,.92],filter:["blur(0px)","blur(5px)"],translateY:this.stackingEffect?[0,-54]:[0,0]},scale_fade:{scale:[1,.92],translateY:this.stackingEffect?[0,-54]:[0,0]},overlapping:{}}},n.prototype.getOverlappingTranslateValues=function(){var t=this.$el&&this.$el[0]?this.$el[0]:null;if(!t)return["0px","-54px"];var e=window.getComputedStyle(t).getPropertyValue("--overlapping-overlap-amount").trim();if(!e)return["0px","-54px"];var i=e.match(/^(-?\d*\.?\d+)([a-z%]*)$/i);return i?["0px","-"+2*Math.abs(parseFloat(i[1]))+(i[2]||"px")]:["0px","-54px"]},n.prototype.navigation=function(){if(this.$el[0].querySelector(".nectar-sticky-media-section__navigation")){this.usingNavigation=!0,this.navigationButtons=[...this.$el[0].querySelectorAll(".nectar-sticky-media-section__navigation button")];var t=this;this.$el[0].querySelectorAll(".nectar-sticky-media-section__navigation button").forEach(function(e,i){e.addEventListener("click",function(){t.scrollToSection(i)})})}},n.prototype.scrollToSection=function(t){var e=this.sections[t].offset;window.scrollTo({top:e,behavior:"smooth"})},n.prototype.events=function(){this.usingMobileBrowser?window.addEventListener("orientationchange",()=>{this.calculateGap(),"overlapping"===this.effect&&(this.effectConfig(),this.createTimelines()),this.calculateOffsets()},{passive:!0}):t(window).on("resize",()=>{this.calculateGap(),"overlapping"===this.effect&&(this.effectConfig(),this.createTimelines()),setTimeout(()=>{this.calculateOffsets()},200)}),t(window).on("load",()=>{this.calculateGap(),this.createTimelines(),this.calculateOffsets()}),this.observe()},n.prototype.createTimelines=function(t){const e=this;this.sectionEls.forEach((t,i)=>{const n=t.querySelector(".nectar-sticky-media-section__content-section__wrap");this.sections[i]={element:t,innerElement:n,elementHeight:t.offsetHeight,isPinned:!1,timeline:anime.timeline({autoplay:!1,update:function(t){e.stackingEffect&&"default"===e.effect&&(100===Math.round(t.progress)?(n.style.transform="translateY(-15px)",e.sections[i-1]&&(e.sections[i-1].innerElement.style.transform="translateY(-30px)")):n.style.transform="translateY(0px)")}}),fadeOutTimeline:anime.timeline({autoplay:!1})},"overlapping"===this.effect?this.sections[i].timeline.add({duration:1e3,easing:"linear",targets:t}):this.sections[i].timeline.add({duration:1e3,easing:"linear",targets:t,...this.effects[this.effect]}),this.stackingEffect&&"default"!==this.effect&&"overlapping"!==this.effect&&this.sections[i].fadeOutTimeline.add({duration:1e3,easing:"linear",targets:t,opacity:[1,0]})})},n.prototype.navHighlight=function(){this.usingNavigation&&(this.navigationButtons.forEach(function(t,e){t.classList.remove("active")}),this.navigationButtons[this.activeIndex].classList.add("active"))},n.prototype.calculateGap=function(){const t=/section-height-(\d+)vh/;this.$el[0].classList.forEach(e=>{const i=e.match(t);if(i){const t=i[1],e=(100-parseInt(t))/2,n=getComputedStyle(document.documentElement).getPropertyValue("--header-nav-height");if(n&&this.subtractNavHeight){const t=c(n,this.$el[0]);this.gap=window.nectarDOMInfo.winH*(e/100)+t}else this.gap=window.nectarDOMInfo.winH*(e/100)}})},n.prototype.calculateOffsets=function(){const t=window.nectarDOMInfo&&window.nectarDOMInfo.scrollTop?window.nectarDOMInfo.scrollTop:window.scrollY,e=this.$el[0].getBoundingClientRect().top+t;this.sectionEls.forEach((t,i)=>{const n=this.gap;let s=null;for(let t of this.$el[0].classList){const e=t.match(/^section-max-height-phone-(.+)$/)&&window.nectarDOMInfo&&window.nectarDOMInfo.winW<690,i=t.match(/^section-max-height-tablet-(.+)$/)&&window.nectarDOMInfo&&window.nectarDOMInfo.winW<1e3;if(e||i){s="calc(var(--header-nav-height, 40px) + "+(this.stackingEffect?60:30)+"px)";break}}t.style.top=s||n+"px";this.gap;const o=e-this.gap+t.offsetHeight*i;this.sections[i].offset=o,this.sections[i].elementHeight=t.offsetHeight})},n.prototype.applyWillChange=function(t){t&&(t.element&&t.element.style&&(t.element.style.willChange="transform, filter"),t.innerElement&&t.innerElement.style&&(t.innerElement.style.willChange="transform, filter"))},n.prototype.clearWillChange=function(t){t&&(t.element&&t.element.style&&t.element.style.removeProperty("will-change"),t.innerElement&&t.innerElement.style&&t.innerElement.style.removeProperty("will-change"))},n.prototype.raf=function(){if(!window.nectarDOMInfo.scrollTop||window.nectarState&&window.nectarState.materialOffCanvasOpen)return void window.requestAnimationFrame(this.raf.bind(this));const t=window.nectarDOMInfo.scrollTop;this.sections.forEach((e,i)=>{if(i!==this.sections.length-1&&Number.isFinite(e.offset)&&Number.isFinite(e.elementHeight)&&!(e.elementHeight<=0)){if(e.offset<t){const s=t-e.offset;let o=s/e.elementHeight;this.stackingEffect&&"default"!==this.effect&&"overlapping"!==this.effect&&(o=s/(2*e.elementHeight));const a=i===this.sections.length-2;if(a&&(o=Math.min(o,.5)),this.stackingEffect&&"default"!==this.effect&&e.element&&e.element.style){const t=Math.max(0,Math.min(a?.5:1,o));e.element.style.setProperty("--progress",String(t))}var n=o>0&&o<(a?.5:1);if(n&&!e.isPinned?(e.isPinned=!0,this.applyWillChange(e)):!n&&e.isPinned&&(e.isPinned=!1,this.clearWillChange(e)),o>=1&&this.stackingEffect&&"default"!==this.effect&&!a&&"overlapping"!==this.effect){e.timeline.seek(e.timeline.duration);const t=s/e.elementHeight;e.fadeOutTimeline.seek((t-2)*e.fadeOutTimeline.duration)}else{if("overlapping"===this.effect){const n=Math.max(0,Math.min(this.sections.length-1,(t-this.sections[0].offset)/e.elementHeight)),s=Math.max(0,n-i),o="calc("+String(0-s)+" * var(--overlapping-overlap-amount))";e.element.style.transform="translateY("+o+")"}else e.timeline.seek(o*e.timeline.duration);this.stackingEffect&&"default"!==this.effect&&"overlapping"!==this.effect&&e.fadeOutTimeline.seek(0)}}else e.isPinned&&(e.isPinned=!1,this.clearWillChange(e)),"overlapping"===this.effect&&e&&e.element&&e.element.style&&(e.element.style.transform="translateY(0px)");e.offset-e.elementHeight/2<t&&e.offset+e.elementHeight/2>t&&this.activeIndex!==i&&this.setActiveIndex(i)}}),window.requestAnimationFrame(this.raf.bind(this))},n.prototype.setActiveIndex=function(t){this.activeIndex=t,this.navHighlight()},n.prototype.observe=function(){var t=this;this.observer=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){t.calculateOffsets();var i=e.target.querySelector(".nectar-sticky-media-section__media video");i&&0==i.currentTime&&t.playSectionVideo(i),t.observer.unobserve(e.target)}})},{rootMargin:"-5% 0% -5% 0%",threshold:0}),this.sectionEls.forEach(e=>{t.observer.observe(e)})},n.prototype.playSectionVideo=function(t){var e=this;t.readyState>=2?(t.pause(),t.currentTime=0,t.play()):setTimeout(function(){e.playSectionVideo(t)},70)};var o=s.prototype;o.events=function(){this.usingFrontEndEditor&&(this.rebuildMedia(),setTimeout(this.verticallyCenter.bind(this),1500),setTimeout(this.verticallyCenter.bind(this),3e3)),this.observe(),window.nectarDOMInfo&&window.nectarDOMInfo.usingMobileBrowser&&window.nectarDOMInfo.winW<1e3||(this.trackDirection(),this.verticallyCenter(),t(window).on("resize",this.verticallyCenter.bind(this)))},o.verticallyCenter=function(){if(window.nectarDOMInfo){var e=0;e=t("body").is('[data-header-format="left-header"]')||t("body").is('[data-hhun="1"]')||t("#header-outer").length>0&&t("#header-outer").is('[data-permanent-transparent="1"]')||t(".page-template-template-no-header-footer").length>0||t(".page-template-template-no-header").length>0?0:t("#header-space").length>0?t("#header-space").height():0,window.nectarDOMInfo.adminBarHeight>0&&(e+=window.nectarDOMInfo.adminBarHeight);var i=(window.nectarDOMInfo.winH-this.$mediaSections.height())/2+e/2;this.$el[0].style.setProperty("--nectar-sticky-media-sections-vert-y",i+"px")}},o.isSafari=function(){return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")},o.trackDirection=function(){window.nectarDOMInfo.scrollTop!=this.prevScroll?(window.nectarDOMInfo.scrollTop>this.prevScroll?this.direction="down":this.direction="up",this.prevScroll=window.nectarDOMInfo.scrollTop,window.requestAnimationFrame(this.trackDirection.bind(this))):window.requestAnimationFrame(this.trackDirection.bind(this))},o.observe=function(){var e=this;this.sections=Array.from(this.$contentSections.find("> div")),"IntersectionObserver"in window&&(window.nectarDOMInfo.usingMobileBrowser&&window.nectarDOMInfo.winW<1e3?(this.mobileObserver=new IntersectionObserver(function(i){i.forEach(function(i){if(i.isIntersecting){var n=t(i.target).index(),s=e.$contentSections.find("> .nectar-sticky-media-section__content-section:eq("+n+")");if(s.find("video").length>0)0==s.find("video")[0].currentTime&&e.playSectionVideo(s.find("video")[0]);e.mobileObserver.unobserve(i.target)}})},{rootMargin:"-5% 0% -5% 0%",threshold:0}),this.$contentSections.find("> div").each(function(){e.mobileObserver.observe(t(this)[0])})):(this.observer=new IntersectionObserver(function(i){i.forEach(function(i){if(i.isIntersecting){var n=t(i.target).index();e.activeIndex=n;var s=e.$mediaSections.find("> .nectar-sticky-media-section__media-wrap:eq("+n+")"),o=e.$contentSections.find("> .nectar-sticky-media-section__content-section:eq("+n+")"),a=e.$mediaSections.find("> .nectar-sticky-media-section__media-wrap");if(e.activeIndex==e.prevIndex)return;if(clearTimeout(e.timeout),e.timeout=setTimeout(function(){a.removeClass("active"),s.addClass("active")},100),!s.hasClass("pause-trigger")||1==e.prevIndex&&0==e.activeIndex||e.prevIndex==a.length-2&&e.activeIndex==a.length-1)if(s.find("video").length>0&&window.nectarDOMInfo.winW>999&&e.playSectionVideo(s.find("video")[0]),o.find("video").length>0&&window.nectarDOMInfo.winW<1e3)0==o.find("video")[0].currentTime&&e.playSectionVideo(o.find("video")[0]);0==n||n==e.$contentSections.find("> div").length-1?s.addClass("pause-trigger"):a.removeClass("pause-trigger"),e.prevIndex=n}})},{root:this.isSafari()?null:document,rootMargin:"-40% 0% -40% 0%",threshold:0}),this.$contentSections.find("> div").each(function(){e.observer.observe(t(this)[0])})))},o.playSectionVideo=function(t){var e=this;t.readyState>=2?(t.pause(),t.currentTime=0,t.play()):setTimeout(function(){e.playSectionVideo(t)},70)},o.shouldUpdate=function(e){return!!("down"===this.direction&&!e.isIntersecting||"down"===this.direction&&e.isIntersecting&&0==t(e.target).index())||!("up"!==this.direction||!e.isIntersecting)},o.rebuildMedia=function(){var e=this,i=[];this.$contentSections.find(".nectar-sticky-media-section__content-section").each(function(e){t(this).find(".nectar-sticky-media-content__media-wrap").length>1&&t(this).find(".nectar-sticky-media-content__media-wrap").each(function(e){e>0&&t(this).remove()}),i[e]=t(this).find(".nectar-sticky-media-content__media-wrap").clone(),i[e].removeClass("nectar-sticky-media-content__media-wrap").addClass("nectar-sticky-media-section__media-wrap")}),e.$mediaSections.html(" "),i.forEach(function(t){e.$mediaSections.append(t)}),t(window).trigger("salient-lazyloading-image-reinit")};var a=[];function r(){document.querySelector("#nectar_fullscreen_rows")||(a=[],t(".nectar-sticky-media-sections:not(.type--scroll-pinned-sections):not(.type--horizontal-scrolling):not(.type--layered-card-reveal):not(.type--stacking-cards)").each(function(e){a[e]=new s(t(this))}),t(".nectar-sticky-media-sections.type--scroll-pinned-sections").each(function(e){a[e]=new n(t(this))}),t(".nectar-sticky-media-sections.type--horizontal-scrolling").each(function(e){a[e]=new i(t(this))}),t(".nectar-sticky-media-sections.type--layered-card-reveal").each(function(i){a[i]=new e(t(this))}))}function c(t,e){if(!t)return 0;const i=String(t).trim();if(""===i)return 0;if(/^-?\d+(?:\.\d+)?px$/.test(i))return parseFloat(i);const n=document.createElement("div");n.style.position="absolute",n.style.visibility="hidden",n.style.height="0",n.style.top="0",n.style.left="0",n.style.setProperty("height",i);const s=e&&e.ownerDocument?e.ownerDocument.body:document.body;s.appendChild(n);const o=window.getComputedStyle(n).height;s.removeChild(n);const a=parseFloat(o);return isNaN(a)?0:a}t(document).ready(function(){r(),t(window).on("vc_reload",function(){setTimeout(r,200)})})}(jQuery);